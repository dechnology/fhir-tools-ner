import csv
import json
import io
import uuid
import requests

# 加载CSV数据
file_path = '../data/input/hosp2017_MED(9).csv'
with open(file_path, 'r', encoding='utf-8') as file:
    csv_data = file.read()

# 使用StringIO将字符串模拟为文件对象
csv_file = io.StringIO(csv_data)

# 定义CSV文件中的列名和对应的目标键名
original_fieldnames = ['sqe', '急診病歷', '住院(1)', '住院(2)', '']
desired_fieldnames = ['sqe', 'ER', 'HR', 'LR']

# 创建CSV阅读器，指定原始的字段名
reader = csv.DictReader(csv_file, fieldnames=original_fieldnames, delimiter=',', quotechar='"')

# 跳过原始的标题行
next(reader)

# 读取CSV数据并存储为列表
data_list = []
for row in reader:
    # 删除键为空字符串的项
    if '' in row:
        del row['']
    # 创建新的字典，使用目标键名
    new_row = {}
    for original_key, desired_key in zip(original_fieldnames, desired_fieldnames):
        if original_key in row:
            new_row[desired_key] = row[original_key]
    data_list.append(new_row)

# 将列表包装在一个字典中，键名为"result"
data = {'result': data_list}

# 将数据转换为JSON格式
json_data = json.dumps(data, ensure_ascii=False, indent=4)

# 将JSON数据保存到文件
output_file_path = '../data/input/hosp2017_MED(9).csv.json'
with open(output_file_path, 'w', encoding='utf-8') as file:
    file.write(json_data)



# 跳過第一行標題後，呼叫 http://localhost:62593/txt_ner
available_types = [
    "None"
    ,"A"
    ,"B"
    ,"C"
    ]
available_sqe_list = ['11139', '11142', '11157', '11174', '11182', '11184', '11195', '11196', '11200', '11211', '11222', '11226', '11245', '11254', '11256', '11262', '11264', '11269', '11277', '11285', '11286', '11293', '11294', '11308', '11310', '11318', '11319', '11330', '11332', '11341', '11348', '11349', '11358', '11359', '11363', '11364', '11381', '11389', '11390', '11398', '11412', '11414', '11418', '11430', '11446', '11460', '11465', '11495', '11498', '11501', '11509', '11511', '11513', '11517', '11521', '11522', '11534', '11543', '11547', '11566', '11568', '11574', '11577', '11590', '11591', '11593', '11601', '11602', '11606', '11609', '11612', '11615', '11616', '11642', '11660', '11665', '11674', '11677', '11682', '11689', '11696', '11708', '11716', '11718', '11720', '11728', '11730', '11734', '11747', '11749', '11750', '11765', '11769', '11776', '11780', '11790', '11793', '11795', '11799', '11805', '11816', '11818', '11843', '11865', '11872', '11883', '11884', '11886', '11888', '11889', '11890', '11891', '11892', '11895', '11896', '11898', '11899', '11900', '11902', '11903', '11904', '11905', '11907', '11908', '11910', '11911', '11913', '11915', '11916', '11918', '11922', '11925', '11931', '11937', '11950', '11966', '11968', '11971', '11975', '11978', '11983', '11993', '11999', '12004', '12022', '12037', '12039', '12052', '12058', '12087', '12097', '12103', '12104', '12123', '12132', '12135', '12142', '12152', '12153', '12157', '12165', '12170', '12177', '12184', '12190', '12195', '12200', '12201', '12206', '12223', '12226', '12243', '12247', '12250', '12254', '12259', '12266', '12289', '12301', '12302', '12316', '12329', '12332', '12334', '12367', '12372', '12391', '12403', '12406', '12414', '12469', '12474', '12475', '12490', '12493', '12496', '12504', '12515', '12530', '12536']
    
# available_sqe_list = [
#     "None"
#     ,"11124"
#     # ,"11127"
#     # ,"11128"
#     # ,"11130"
#     # ,"11131"
#     # ,"11132"
#     # ,"11134"
#     # ,"11135"
#     # ,"11136"
#     # ,"11138"
#     ,"11139"
#     # ,"11140"
#     # ,"11141"
#     # ,"11142"
#     # ,"11143"
#     # ,"11149"
#     # ,"11151"
#     # ,"11153"
#     # ,"11154"
#     # ,"11156"
#     # ,"11157"
#     # ,"11158"
#     # ,"11159"
#     # ,"11160"
#     # ,"11161"
#     # ,"11162"
#     # ,"11163"
#     # ,"11164"
#     # ,"11165"
#     # ,"11166"
#     # ,"11167"
#     # ,"11169"
#     # ,"11170"
#     # ,"11172"
#     # ,"11173"
#     # ,"11174"
#     # ,"11175"
#     # ,"11176"
#     # ,"11178"
#     # ,"11180"
#     # ,"11182"
#     # ,"11184"
#     # ,"11191"
#     # ,"11194"
#     # ,"11195"
#     # ,"11196"
#     # ,"11198"
#     # ,"11200"
#     # ,"11201"
#     # ,"11202"
#     # ,"11203"
#     # ,"11204"
#     # ,"11205"
#     # ,"11206"
#     # ,"11210"
#     # ,"11211"
#     # ,"11213"
#     # ,"11216"
#     # ,"11217"
#     # ,"11218"
#     # ,"11219"
#     # ,"11221"
#     # ,"11222"
#     # ,"11223"
#     # ,"11224"
#     # ,"11225"
#     # ,"11226"
#     # ,"11227"
#     # ,"11229"
#     # ,"11230"
#     # ,"11232"
#     # ,"11233"
#     # ,"11240"
#     # ,"11241"
#     # ,"11243"
#     # ,"11244"
#     # ,"11245"
#     # ,"11248"
#     # ,"11250"
#     # ,"11252"
#     # ,"11254"
#     # ,"11255"
#     # ,"11256"
#     # ,"11257"
#     # ,"11258"
#     # ,"11259"
#     # ,"11260"
#     # ,"11261"
#     # ,"11262"
#     # ,"11263"
#     # ,"11264"
#     # ,"11266"
#     # ,"11267"
#     # ,"11268"
#     # ,"11269"
#     # ,"11270"
#     # ,"11271"
#     # ,"11272"
#     # ,"11274"
#     # ,"11275"
#     # ,"11276"
#     # ,"11277"
#     # ,"11278"
#     # ,"11280"
#     # ,"11281"
#     # ,"11282"
#     # ,"11285"
#     # ,"11286"
#     # ,"11289"
#     # ,"11291"
#     # ,"11293"
#     # ,"11294"
#     # ,"11296"
#     # ,"11297"
#     # ,"11298"
#     # ,"11299"
#     # ,"11301"
#     # ,"11304"
#     # ,"11307"
#     # ,"11308"
#     # ,"11309"
#     # ,"11310"
#     # ,"11311"
#     # ,"11312"
#     # ,"11316"
#     # ,"11317"
#     # ,"11318"
#     # ,"11319"
#     # ,"11321"
#     # ,"11322"
#     # ,"11323"
#     # ,"11324"
#     # ,"11325"
#     # ,"11326"
#     # ,"11327"
#     # ,"11328"
#     # ,"11329"
#     # ,"11330"
#     # ,"11331"
#     # ,"11332"
#     # ,"11338"
#     # ,"11339"
#     # ,"11341"
#     # ,"11344"
#     # ,"11347"
#     # ,"11348"
#     # ,"11349"
#     # ,"11350"
#     # ,"11353"
#     # ,"11357"
#     # ,"11358"
#     # ,"11359"
#     # ,"11361"
#     # ,"11362"
#     # ,"11363"
#     # ,"11364"
#     # ,"11365"
#     # ,"11366"
#     # ,"11367"
#     # ,"11369"
#     # ,"11370"
#     # ,"11371"
#     # ,"11373"
#     # ,"11374"
#     # ,"11375"
#     # ,"11376"
#     # ,"11378"
#     # ,"11379"
#     # ,"11380"
#     # ,"11381"
#     # ,"11383"
#     # ,"11385"
#     # ,"11386"
#     # ,"11388"
#     # ,"11389"
#     # ,"11390"
#     # ,"11391"
#     # ,"11392"
#     # ,"11394"
#     # ,"11395"
#     # ,"11396"
#     # ,"11397"
#     # ,"11398"
#     # ,"11399"
#     # ,"11400"
#     # ,"11401"
#     # ,"11406"
#     # ,"11407"
#     # ,"11409"
#     # ,"11410"
#     # ,"11411"
#     # ,"11412"
#     # ,"11413"
#     # ,"11414"
#     # ,"11415"
#     # ,"11416"
#     # ,"11418"
#     # ,"11420"
#     # ,"11422"
#     # ,"11423"
#     # ,"11424"
#     # ,"11425"
#     # ,"11427"
#     # ,"11428"
#     # ,"11429"
#     # ,"11430"
#     # ,"11431"
#     # ,"11432"
#     # ,"11433"
#     # ,"11434"
#     # ,"11435"
#     # ,"11436"
#     # ,"11438"
#     # ,"11439"
#     # ,"11440"
#     # ,"11441"
#     # ,"11442"
#     # ,"11444"
#     # ,"11446"
#     # ,"11447"
#     # ,"11448"
#     # ,"11449"
#     # ,"11450"
#     # ,"11451"
#     # ,"11452"
#     # ,"11453"
#     # ,"11455"
#     # ,"11456"
#     # ,"11457"
#     # ,"11458"
#     # ,"11459"
#     # ,"11460"
#     # ,"11462"
#     # ,"11463"
#     # ,"11464"
#     # ,"11465"
#     # ,"11466"
#     # ,"11467"
#     # ,"11468"
#     # ,"11469"
#     # ,"11470"
#     # ,"11471"
#     # ,"11472"
#     # ,"11473"
#     # ,"11474"
#     # ,"11475"
#     # ,"11476"
#     # ,"11478"
#     # ,"11480"
#     # ,"11482"
#     # ,"11483"
#     # ,"11485"
#     # ,"11486"
#     # ,"11487"
#     # ,"11489"
#     # ,"11490"
#     # ,"11491"
#     # ,"11494"
#     # ,"11495"
#     # ,"11496"
#     # ,"11498"
#     # ,"11499"
#     # ,"11500"
#     # ,"11501"
#     # ,"11503"
#     # ,"11505"
#     # ,"11506"
#     # ,"11507"
#     # ,"11508"
#     # ,"11509"
#     # ,"11510"
#     # ,"11511"
#     # ,"11512"
#     # ,"11513"
#     # ,"11514"
#     # ,"11515"
#     # ,"11516"
#     # ,"11517"
#     # ,"11518"
#     # ,"11520"
#     # ,"11521"
#     # ,"11522"
#     # ,"11523"
#     # ,"11524"
#     # ,"11526"
#     # ,"11527"
#     # ,"11528"
#     # ,"11529"
#     # ,"11530"
#     # ,"11533"
#     # ,"11534"
#     # ,"11535"
#     # ,"11537"
#     # ,"11541"
#     # ,"11543"
#     # ,"11546"
#     # ,"11547"
#     # ,"11548"
#     # ,"11551"
#     # ,"11553"
#     # ,"11554"
#     # ,"11561"
#     # ,"11562"
#     # ,"11563"
#     # ,"11565"
#     # ,"11566"
#     # ,"11568"
#     # ,"11569"
#     # ,"11570"
#     # ,"11572"
#     # ,"11574"
#     # ,"11576"
#     # ,"11577"
#     # ,"11578"
#     # ,"11581"
#     # ,"11582"
#     # ,"11583"
#     # ,"11585"
#     # ,"11587"
#     # ,"11588"
#     # ,"11589"
#     # ,"11590"
#     # ,"11591"
#     # ,"11592"
#     # ,"11593"
#     # ,"11596"
#     # ,"11597"
#     # ,"11598"
#     # ,"11599"
#     # ,"11600"
#     # ,"11601"
#     # ,"11602"
#     # ,"11603"
#     # ,"11606"
#     # ,"11607"
#     # ,"11608"
#     # ,"11609"
#     # ,"11610"
#     # ,"11611"
#     # ,"11612"
#     # ,"11613"
#     # ,"11615"
#     # ,"11616"
#     # ,"11617"
#     # ,"11618"
#     # ,"11619"
#     # ,"11620"
#     # ,"11621"
#     # ,"11622"
#     # ,"11624"
#     # ,"11625"
#     # ,"11626"
#     # ,"11627"
#     # ,"11628"
#     # ,"11629"
#     # ,"11631"
#     # ,"11632"
#     # ,"11633"
#     # ,"11636"
#     # ,"11637"
#     # ,"11638"
#     # ,"11639"
#     # ,"11640"
#     # ,"11641"
#     # ,"11642"
#     # ,"11643"
#     # ,"11644"
#     # ,"11645"
#     # ,"11646"
#     # ,"11648"
#     # ,"11650"
#     # ,"11651"
#     # ,"11653"
#     # ,"11655"
#     # ,"11656"
#     # ,"11657"
#     # ,"11658"
#     # ,"11660"
#     # ,"11661"
#     # ,"11662"
#     # ,"11664"
#     # ,"11665"
#     # ,"11666"
#     # ,"11667"
#     # ,"11668"
#     # ,"11669"
#     # ,"11670"
#     # ,"11671"
#     # ,"11672"
#     # ,"11673"
#     # ,"11674"
#     # ,"11676"
#     # ,"11677"
#     # ,"11678"
#     # ,"11679"
#     # ,"11680"
#     # ,"11682"
#     # ,"11683"
#     # ,"11685"
#     # ,"11686"
#     # ,"11687"
#     # ,"11689"
#     # ,"11690"
#     # ,"11692"
#     # ,"11693"
#     # ,"11694"
#     # ,"11696"
#     # ,"11697"
#     # ,"11698"
#     # ,"11703"
#     # ,"11704"
#     # ,"11705"
#     # ,"11706"
#     # ,"11707"
#     # ,"11708"
#     # ,"11709"
#     # ,"11710"
#     # ,"11711"
#     # ,"11712"
#     # ,"11713"
#     # ,"11714"
#     # ,"11715"
#     # ,"11716"
#     # ,"11718"
#     # ,"11719"
#     # ,"11720"
#     # ,"11721"
#     # ,"11722"
#     # ,"11727"
#     # ,"11728"
#     # ,"11729"
#     # ,"11730"
#     # ,"11732"
#     # ,"11733"
#     # ,"11734"
#     # ,"11736"
#     # ,"11737"
#     # ,"11738"
#     # ,"11739"
#     # ,"11740"
#     # ,"11741"
#     # ,"11742"
#     # ,"11744"
#     # ,"11745"
#     # ,"11746"
#     # ,"11747"
#     # ,"11748"
#     # ,"11749"
#     # ,"11750"
#     # ,"11751"
#     # ,"11752"
#     # ,"11753"
#     # ,"11754"
#     # ,"11756"
#     # ,"11758"
#     # ,"11759"
#     # ,"11760"
#     # ,"11761"
#     # ,"11764"
#     # ,"11765"
#     # ,"11766"
#     # ,"11767"
#     # ,"11769"
#     # ,"11772"
#     # ,"11773"
#     # ,"11774"
#     # ,"11775"
#     # ,"11776"
#     # ,"11778"
#     # ,"11780"
#     # ,"11783"
#     # ,"11785"
#     # ,"11786"
#     # ,"11787"
#     # ,"11788"
#     # ,"11789"
#     # ,"11790"
#     # ,"11791"
#     # ,"11792"
#     # ,"11793"
#     # ,"11794"
#     # ,"11795"
#     # ,"11796"
#     # ,"11798"
#     # ,"11799"
#     # ,"11801"
#     # ,"11802"
#     # ,"11803"
#     # ,"11804"
#     # ,"11805"
#     # ,"11807"
#     # ,"11809"
#     # ,"11810"
#     # ,"11811"
#     # ,"11812"
#     # ,"11815"
#     # ,"11816"
#     # ,"11817"
#     # ,"11818"
#     # ,"11820"
#     # ,"11822"
#     # ,"11823"
#     # ,"11824"
#     # ,"11825"
#     # ,"11826"
#     # ,"11827"
#     # ,"11828"
#     # ,"11829"
#     # ,"11830"
#     # ,"11831"
#     # ,"11832"
#     # ,"11833"
#     # ,"11834"
#     # ,"11835"
#     # ,"11836"
#     # ,"11837"
#     # ,"11841"
#     # ,"11843"
#     # ,"11846"
#     # ,"11847"
#     # ,"11848"
#     # ,"11849"
#     # ,"11850"
#     # ,"11851"
#     # ,"11854"
#     # ,"11855"
#     # ,"11856"
#     # ,"11860"
#     # ,"11862"
#     # ,"11864"
#     # ,"11865"
#     # ,"11866"
#     # ,"11867"
#     # ,"11870"
#     # ,"11871"
#     # ,"11872"
#     # ,"11876"
#     # ,"11877"
#     # ,"11879"
#     # ,"11880"
#     # ,"11882"
#     # ,"11883"
#     # ,"11884"
#     # ,"11886"
#     # ,"11888"
#     # ,"11889"
#     # ,"11890"
#     # ,"11891"
#     # ,"11892"
#     # ,"11895"
#     # ,"11896"
#     # ,"11898"
#     # ,"11899"
#     # ,"11900"
#     # ,"11902"
#     # ,"11903"
#     # ,"11904"
#     # ,"11905"
#     # ,"11907"
#     # ,"11908"
#     # ,"11910"
#     # ,"11911"
#     # ,"11913"
#     # ,"11915"
#     # ,"11916"
#     # ,"11917"
#     # ,"11918"
#     # ,"11919"
#     # ,"11920"
#     # ,"11921"
#     # ,"11922"
#     # ,"11923"
#     # ,"11924"
#     # ,"11925"
#     # ,"11926"
#     # ,"11927"
#     # ,"11929"
#     # ,"11930"
#     # ,"11931"
#     # ,"11932"
#     # ,"11933"
#     # ,"11934"
#     # ,"11935"
#     # ,"11936"
#     # ,"11937"
#     # ,"11938"
#     # ,"11941"
#     # ,"11942"
#     # ,"11943"
#     # ,"11944"
#     # ,"11945"
#     # ,"11946"
#     # ,"11948"
#     # ,"11950"
#     # ,"11952"
#     # ,"11953"
#     # ,"11955"
#     # ,"11956"
#     # ,"11957"
#     # ,"11958"
#     # ,"11959"
#     # ,"11960"
#     # ,"11961"
#     # ,"11963"
#     # ,"11965"
#     # ,"11966"
#     # ,"11967"
#     # ,"11968"
#     # ,"11969"
#     # ,"11970"
#     # ,"11971"
#     # ,"11973"
#     # ,"11975"
#     # ,"11976"
#     # ,"11978"
#     # ,"11979"
#     # ,"11980"
#     # ,"11983"
#     # ,"11985"
#     # ,"11986"
#     # ,"11987"
#     # ,"11988"
#     # ,"11989"
#     # ,"11991"
#     # ,"11992"
#     # ,"11993"
#     # ,"11994"
#     # ,"11996"
#     # ,"11997"
#     # ,"11998"
#     # ,"11999"
#     # ,"12000"
#     # ,"12002"
#     # ,"12004"
#     # ,"12005"
#     # ,"12010"
#     # ,"12011"
#     # ,"12013"
#     # ,"12014"
#     # ,"12015"
#     # ,"12016"
#     # ,"12018"
#     # ,"12020"
#     # ,"12021"
#     # ,"12022"
#     # ,"12024"
#     # ,"12028"
#     # ,"12029"
#     # ,"12030"
#     # ,"12032"
#     # ,"12034"
#     # ,"12037"
#     # ,"12038"
#     # ,"12039"
#     # ,"12040"
#     # ,"12041"
#     # ,"12042"
#     # ,"12043"
#     # ,"12044"
#     # ,"12046"
#     # ,"12048"
#     # ,"12049"
#     # ,"12050"
#     # ,"12051"
#     # ,"12052"
#     # ,"12053"
#     # ,"12054"
#     # ,"12057"
#     # ,"12058"
#     # ,"12060"
#     # ,"12061"
#     # ,"12063"
#     # ,"12064"
#     # ,"12067"
#     # ,"12069"
#     # ,"12072"
#     # ,"12073"
#     # ,"12074"
#     # ,"12075"
#     # ,"12076"
#     # ,"12077"
#     # ,"12078"
#     # ,"12079"
#     # ,"12080"
#     # ,"12084"
#     # ,"12085"
#     # ,"12086"
#     # ,"12087"
#     # ,"12088"
#     # ,"12089"
#     # ,"12090"
#     # ,"12091"
#     # ,"12093"
#     # ,"12095"
#     # ,"12096"
#     # ,"12097"
#     # ,"12099"
#     # ,"12101"
#     # ,"12103"
#     # ,"12104"
#     # ,"12105"
#     # ,"12106"
#     # ,"12107"
#     # ,"12108"
#     # ,"12109"
#     # ,"12110"
#     # ,"12113"
#     # ,"12114"
#     # ,"12117"
#     # ,"12120"
#     # ,"12121"
#     # ,"12122"
#     # ,"12123"
#     # ,"12124"
#     # ,"12125"
#     # ,"12126"
#     # ,"12127"
#     # ,"12129"
#     # ,"12130"
#     # ,"12131"
#     # ,"12132"
#     # ,"12133"
#     # ,"12134"
#     # ,"12135"
#     # ,"12136"
#     # ,"12141"
#     # ,"12142"
#     # ,"12143"
#     # ,"12144"
#     # ,"12145"
#     # ,"12146"
#     # ,"12147"
#     # ,"12148"
#     # ,"12149"
#     # ,"12150"
#     # ,"12152"
#     # ,"12153"
#     # ,"12154"
#     # ,"12155"
#     # ,"12156"
#     # ,"12157"
#     # ,"12158"
#     # ,"12159"
#     # ,"12160"
#     # ,"12161"
#     # ,"12162"
#     # ,"12163"
#     # ,"12165"
#     # ,"12166"
#     # ,"12167"
#     # ,"12168"
#     # ,"12170"
#     # ,"12171"
#     # ,"12173"
#     # ,"12174"
#     # ,"12175"
#     # ,"12176"
#     # ,"12177"
#     # ,"12178"
#     # ,"12179"
#     # ,"12181"
#     # ,"12183"
#     # ,"12184"
#     # ,"12187"
#     # ,"12189"
#     # ,"12190"
#     # ,"12194"
#     # ,"12195"
#     # ,"12199"
#     # ,"12200"
#     # ,"12201"
#     # ,"12202"
#     # ,"12203"
#     # ,"12204"
#     # ,"12205"
#     # ,"12206"
#     # ,"12207"
#     # ,"12209"
#     # ,"12210"
#     # ,"12211"
#     # ,"12212"
#     # ,"12214"
#     # ,"12215"
#     # ,"12217"
#     # ,"12219"
#     # ,"12222"
#     # ,"12223"
#     # ,"12224"
#     # ,"12226"
#     # ,"12227"
#     # ,"12228"
#     # ,"12229"
#     # ,"12231"
#     # ,"12232"
#     # ,"12233"
#     # ,"12234"
#     # ,"12235"
#     # ,"12236"
#     # ,"12241"
#     # ,"12242"
#     # ,"12243"
#     # ,"12244"
#     # ,"12245"
#     # ,"12246"
#     # ,"12247"
#     # ,"12250"
#     # ,"12251"
#     # ,"12252"
#     # ,"12253"
#     # ,"12254"
#     # ,"12255"
#     # ,"12257"
#     # ,"12259"
#     # ,"12260"
#     # ,"12262"
#     # ,"12263"
#     # ,"12265"
#     # ,"12266"
#     # ,"12269"
#     # ,"12270"
#     # ,"12272"
#     # ,"12273"
#     # ,"12276"
#     # ,"12277"
#     # ,"12280"
#     # ,"12282"
#     # ,"12283"
#     # ,"12284"
#     # ,"12286"
#     # ,"12287"
#     # ,"12288"
#     # ,"12289"
#     # ,"12290"
#     # ,"12292"
#     # ,"12293"
#     # ,"12294"
#     # ,"12297"
#     # ,"12299"
#     # ,"12300"
#     # ,"12301"
#     # ,"12302"
#     # ,"12303"
#     # ,"12305"
#     # ,"12306"
#     # ,"12307"
#     # ,"12308"
#     # ,"12309"
#     # ,"12310"
#     # ,"12311"
#     # ,"12312"
#     # ,"12314"
#     # ,"12316"
#     # ,"12318"
#     # ,"12319"
#     # ,"12320"
#     # ,"12324"
#     # ,"12325"
#     # ,"12327"
#     # ,"12328"
#     # ,"12329"
#     # ,"12331"
#     # ,"12332"
#     # ,"12333"
#     # ,"12334"
#     # ,"12335"
#     # ,"12338"
#     # ,"12340"
#     # ,"12341"
#     # ,"12345"
#     # ,"12347"
#     # ,"12348"
#     # ,"12352"
#     # ,"12353"
#     # ,"12355"
#     # ,"12356"
#     # ,"12357"
#     # ,"12358"
#     # ,"12359"
#     # ,"12363"
#     # ,"12364"
#     # ,"12365"
#     # ,"12367"
#     # ,"12369"
#     # ,"12372"
#     # ,"12374"
#     # ,"12377"
#     # ,"12379"
#     # ,"12380"
#     # ,"12381"
#     # ,"12382"
#     # ,"12385"
#     # ,"12386"
#     # ,"12388"
#     # ,"12390"
#     # ,"12391"
#     # ,"12392"
#     # ,"12395"
#     # ,"12396"
#     # ,"12397"
#     # ,"12398"
#     # ,"12400"
#     # ,"12401"
#     # ,"12403"
#     # ,"12404"
#     # ,"12405"
#     # ,"12406"
#     # ,"12407"
#     # ,"12408"
#     # ,"12409"
#     # ,"12410"
#     # ,"12411"
#     # ,"12412"
#     # ,"12413"
#     # ,"12414"
#     # ,"12415"
#     # ,"12417"
#     # ,"12419"
#     # ,"12420"
#     # ,"12421"
#     # ,"12422"
#     # ,"12423"
#     # ,"12425"
#     # ,"12427"
#     # ,"12428"
#     # ,"12429"
#     # ,"12432"
#     # ,"12433"
#     # ,"12434"
#     # ,"12435"
#     # ,"12437"
#     # ,"12438"
#     # ,"12439"
#     # ,"12441"
#     # ,"12442"
#     # ,"12443"
#     # ,"12446"
#     # ,"12447"
#     # ,"12448"
#     # ,"12449"
#     # ,"12451"
#     # ,"12452"
#     # ,"12454"
#     # ,"12455"
#     # ,"12456"
#     # ,"12457"
#     # ,"12458"
#     # ,"12460"
#     # ,"12461"
#     # ,"12463"
#     # ,"12464"
#     # ,"12465"
#     # ,"12467"
#     # ,"12469"
#     # ,"12471"
#     # ,"12474"
#     # ,"12475"
#     # ,"12476"
#     # ,"12477"
#     # ,"12478"
#     # ,"12480"
#     # ,"12481"
#     # ,"12482"
#     # ,"12483"
#     # ,"12484"
#     # ,"12485"
#     # ,"12486"
#     # ,"12487"
#     # ,"12489"
#     # ,"12490"
#     # ,"12491"
#     # ,"12493"
#     # ,"12494"
#     # ,"12495"
#     # ,"12496"
#     # ,"12497"
#     # ,"12501"
#     # ,"12502"
#     # ,"12504"
#     # ,"12505"
#     # ,"12506"
#     # ,"12507"
#     # ,"12509"
#     # ,"12510"
#     # ,"12511"
#     # ,"12513"
#     # ,"12514"
#     # ,"12515"
#     # ,"12516"
#     # ,"12517"
#     # ,"12518"
#     # ,"12520"
#     # ,"12521"
#     # ,"12522"
#     # ,"12524"
#     # ,"12526"
#     # ,"12530"
#     # ,"12532"
#     # ,"12535"
#     # ,"12536"
#     # ,"12538"
#     # ,"12541"
#     ]

url = "http://localhost:62593/txt_ner"

# 針對data_list中的每一筆資料的欄位，進行NER，以下是範例：
# payload = json.dumps({
#   "file_id": "02a85fd2-4675-4c79-91f9-49f4c77d057c",
#   "sqe": "4083",
#   "type": "A",
#   "text": "XXXXX"
# })
# record的key是sqe, value裡面的元素的key是type, value是text
file_id = str(uuid.uuid4())
for record in data_list:
    sqe = record['sqe']
    if sqe not in available_sqe_list:
        print(f"Skip sqe {sqe}")
        continue
    segment_list = {
        "A": record['ER'],
        "B": record['HR'],
        "C": record['LR']
    }

    for type_ABC, part_text in segment_list.items():
        if type_ABC not in available_types:
            print(f"Skip type {type_ABC}")
            continue
        payload = {
            "file_id": file_id,
            "sqe": sqe,
            "type": type_ABC,
            "text": part_text or "None"
        }
        print(payload)
        headers = {
            'Content-Type': 'application/json'
        }
        response = requests.request("POST", url, headers=headers, data=json.dumps(payload))
        print(response.text)

